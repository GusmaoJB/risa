% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/byra_prep.R
\name{byra_prep}
\alias{byra_prep}
\title{Prepare Species–Stressor Spatial Input Maps for risa}
\usage{
byra_prep(
  spp_maplist,
  str_maplist,
  area = NULL,
  pixel_size = NULL,
  dimyx = c(512, 512),
  reclass = c(1, 3),
  reclass_cat = FALSE,
  overlaps = TRUE,
  crs = NULL,
  quiet = TRUE
)
}
\arguments{
\item{spp_maplist}{A list of species layers. Each element must be a
`SpatRaster`, `sf`, `sfc`, or `SpatVector` object. Names are auto-generated
if missing.}

\item{str_maplist}{A list of stressor layers. Same requirements as
`spp_maplist`. Names are auto-generated if missing.}

\item{area}{Optional area of interest. May be:
- `NULL` (default) → AOI is built automatically from bounding boxes of
  species and stressor data.
- A `bbox`,
- A `data.frame` convertible to a polygon (via `df_to_shp()`),
- An `sf`/`sfc` object.}

\item{pixel_size}{Not currently used internally. Reserved for future control
of raster resolution.}

\item{dimyx}{A length-2 numeric vector giving output raster dimensions
(rows, columns). Currently passed only implicitly to downstream helpers.}

\item{reclass}{Numeric vector used by `apply_scale()` to reclassify or scale
species and stressor rasters. Default: `c(1, 3)`.}

\item{reclass_cat}{Logical. If `TRUE`, variables are treated as categorical
and overlap is computed using class-based kernels. If `FALSE`, overlap is
based on scaled continuous products. Default: `FALSE`.}

\item{overlaps}{Logical. Whether to compute species–stressor overlap maps.
Default: `TRUE`.}

\item{crs}{Optional target CRS for outputs. Must be interpretable by
`sf::st_crs()` and **must be projected (metric)**. If `NULL`, a suitable
projected CRS (e.g. UTM) is auto-selected when inputs are in long/lat.}

\item{quiet}{Logical. If `FALSE`, progress messages are printed. Default:
`TRUE`.}
}
\value{
A list of class `"risaMaps"` with components:

\describe{
  \item{`species_distributions`}{List of binary species presence/absence rasters.}
  \item{`stressor_distributions`}{List of binary stressor presence/absence rasters.}
  \item{`species_kernel_maps`}{List of scaled/reclassified species rasters.}
  \item{`stressor_kernel_maps`}{List of scaled/reclassified stressor rasters.}
  \item{`overlap_maps`}{Nested list of species–stressor overlap rasters
    (empty if `overlaps = FALSE`).}
  \item{`area_of_interest`}{`sf` polygon defining the spatial AOI in the final
    projected CRS.}
}
}
\description{
Preprocesses lists of species and stressor spatial layers (SpatRaster, sf/sfc,
or SpatVector objects) for use in *risa* analyses.
The function harmonizes coordinate reference systems (CRS), generates an
area of interest (AOI) when none is supplied, scales/reclassifies variables,
computes overlap maps, and outputs species/stressor distribution and kernel
maps in a common projected CRS.
}
\details{
The function:

1. Validates that input layers are spatial (`SpatRaster`, `sf`, etc.).
2. Ensures all inputs share a CRS; if not, they are reprojected to the CRS of
   the AOI or the first species map.
3. If `area` is not provided, constructs an AOI by merging and buffering the
   extents of all rasters.
4. Applies scaling/reclassification to species and stressor layers.
5. Optionally computes species–stressor overlap maps with continuous or
   categorical kernels.
6. Derives or accepts a target **metric CRS** and reprojects all outputs.

Helper functions used internally include:
- `apply_scale()`
- `scale_vars()`
- `get_overlap_kernel()`
- `align_to()`
- `transform_to_metric()`
- `df_to_shp()`

These must be available in the namespace where `byra_prep()` is used.
}
\seealso{
`apply_scale()`, `get_overlap_kernel()`, `align_to()`,
`transform_to_metric()`
}
